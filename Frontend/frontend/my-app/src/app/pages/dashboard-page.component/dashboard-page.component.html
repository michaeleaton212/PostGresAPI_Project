<div class="page">
  <div class="page-header">
    <h2 i18n></h2>
    <button class="back-button" (click)="goBackLogin()" i18n>← Back</button>
  </div>

  <!-- Booking overview -->
  <div class="overview">
    <h3 i18n>Bookings</h3>
    <div class="activeBookings">{{ bookings.length }} Buchung(en)</div>
    <div class="overview-table">
      <!-- Überschriften -->
      <div class="overview-header">
        <div>Name</div>
        <div>Zimmer</div>
        <div>Startdatum</div>
        <div>Enddatum</div>
        <div>Buchungsnummer</div>
        <div>Status</div>
        <div>Einchecken</div>
        <div>Stornieren</div>
        <div>Ansehen</div>
      </div>

      <!-- Dynamische Daten -->
      <div class="overview-row" *ngFor="let b of bookings" [class.cancelled-row]="isCancelled(b)">
        <div data-label="Name:">
          <span class="value-text" [title]="b.name">{{ b.name }}</span>
        </div>
        <div data-label="Zimmer:">
          <span class="value-text" [title]="b.roomName">{{ b.roomName }}</span>
        </div>
        <div data-label="Startdatum:">
          <span class="value-text" [title]="b.startDate | date: 'dd.MM.yyyy'">{{ b.startDate | date: 'dd.MM.yyyy' }}</span>
        </div>
        <div data-label="Enddatum:">
          <span class="value-text" [title]="b.endDate | date: 'dd.MM.yyyy'">{{ b.endDate | date: 'dd.MM.yyyy' }}</span>
        </div>
        <div data-label="Buchungsnummer:">
          <span class="value-text" [title]="b.bookingNumber">{{ b.bookingNumber }}</span>
        </div>

        <!-- Status Button -->
        <div data-label="Status:">
          <button class="status-button"
                  [ngClass]="{
              'status-checked': isCheckedIn(b),
              'status-not-checked': !isCheckedIn(b) && !isCancelled(b),
              'status-pending': b.status === BookingStatus.Pending,
              'status-cancelled': isCancelled(b)
            }"
                  [title]="getStatusText(b.status)">
            {{ getStatusText(b.status) }}
          </button>
        </div>

        <!-- Toggle Einchecken/Auschecken -->
        <div data-label="Einchecken/Auschecken:">
          <div class="toggle" [class.disabled]="isCancelled(b)">
            <input type="checkbox"
                   [id]="'checkin-' + b.bookingNumber"
                   [checked]="isCheckedIn(b)"
                   [disabled]="isCancelled(b)"
                   (change)="toggleCheckIn(b)" />
            <label [for]="'checkin-' + b.bookingNumber"></label>
          </div>
        </div>

        <!-- Stornieren -->
        <div data-label="Stornieren:">
          <button class="stornieren" (click)="cancelBooking(b.bookingNumber)" [disabled]="isCancelled(b)">
            {{ isCancelled(b) ? 'Storniert' : 'Stornieren' }}
          </button>
        </div>

        <!-- Zimmer ansehen -->
        <div data-label="Zimmer ansehen:">
          <button class="zimmer-ansehen" (click)="viewRoom(b)">
            Zimmer ansehen
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="footer-wrapper">
    <app-footer></app-footer>
  </div>
</div>
