<div class="page">
  <h2 i18n>Booking</h2>
  <button class="back-button" (click)="goBackPreview(currentRoomId)" i18n>‚Üê Back</button>

  <!-- Loading state -->
  <div *ngIf="loading">
    <p i18n>Loading booking information...</p>
  </div>

  <!-- Error state -->
  <div *ngIf="error && !loading">
    <p style="color: red;">{{ error }}</p>
    <button (click)="goBack()" i18n>Back to Rooms</button>
  </div>

  <!-- Booking overview + Input + Buttons / Booking number -->
  <div *ngIf="room && !loading" class="overview">
    <br />
    <br />

    <h3 i18n>Overview</h3>
    <br />
    <div class="overview-row">
      <strong i18n>Room:</strong>
      <span>{{ room.name }}</span>
    </div>

    <div class="overview-row">
      <strong i18n>Type:</strong>
      <span>{{ room.type }}</span>
    </div>

    <div *ngIf="startDate" class="overview-row">
      <strong i18n>Check-in:</strong>
      <span>{{ startDate | date:'dd.MM.yyyy' }}</span>
    </div>

    <div *ngIf="endDate" class="overview-row">
      <strong i18n>Check-out:</strong>
      <span>{{ endDate | date:'dd.MM.yyyy' }}</span>
    </div>

    <!-- Bedroom: nur Anzahl Tage -->
    <div *ngIf="room?.type === 'Bedroom'" class="overview-row">
      <strong i18n>Duration:</strong>
      <span i18n>{{ numberOfDays }} day(s)</span>
    </div>

    <!-- Meetingroom: Anzahl Tage + Uhrzeiten -->
    <div *ngIf="room?.type === 'Meetingroom'" class="overview-row">
      <strong i18n>Duration:</strong>
      <span>
        {{ numberOfDays }} day(s), {{ startDate | date:'HH:mm' }} - {{ endDate | date:'HH:mm' }} ({{ durationInMinutes }} min)
      </span>
    </div>

    <!-- If not booked show formular -->
    <div class="form-group" *ngIf="!bookingSuccess">
      <label for="firstName">
        <strong class="left" i18n>Enter Name:</strong>
      </label>
      <input id="firstName" Fove
             type="text"
             [(ngModel)]="firstName"
             placeholder="Enter your first name"
             i18n-placeholder
             maxlength="100"
             required />
    </div>

    <!-- When booked show booking number -->
    <div class="overview-row" *ngIf="bookingSuccess">
      <strong i18n>Booking number:</strong>
      <div class="bookingnumber">
        <span>{{ bookingNumber }}</span>
      </div>
    </div>

    <!-- Show button only when not booked -->
    <div class="button-row" *ngIf="!bookingSuccess">
      <button class="confirmBooking"
              (click)="confirmBooking()
        "
              [disabled]="bookingInProgress || !isFormValid"
              i18n>
        {bookingInProgress, select,
        true {Booking...}
        false {Confirm Booking}
        }
      </button>
    </div>

    <!-- Succestext -->
    <div *ngIf="bookingSuccess">
      <div class="success_text">
        <div class="info">
          <h4 i18n>Your booking was successful.</h4>
        </div>
        <div class="important">
          <h4 i18n>Important: Keep your booking number.</h4>
        </div>
      </div>
    </div>
  </div>

  <div class="footer-wrapper">
    <app-footer></app-footer>
  </div>
</div>
