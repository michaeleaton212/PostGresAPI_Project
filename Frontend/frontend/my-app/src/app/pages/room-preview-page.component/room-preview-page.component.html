<div class="page">
  <h2>Room Preview</h2>

  <!-- Loading state -->
  <div *ngIf="loading" class="loading-container">
    <p>Raum wird geladen...</p>
  </div>

  <!-- Error state -->
  <div *ngIf="error && !loading" class="error-container">
    <p>{{ error }}</p>
    <button (click)="goBack()">Zurück zu Rooms</button>
  </div>

  <!-- Room details -->
  <div *ngIf="room && !loading" class="room-details">
    <div class="room-header">
      <h3>{{ room.name }}</h3>
      <button class="back-button" (click)="goBack()">← Zurück</button>
    </div>

    <div class="room-info">

      <div class="image-and-calendar">
        <div class="image-room">
          <img class="room-preview-image" src="grey.png" [alt]="room.name">
        </div>

        <div class="calendar-wrapper">
          <div class="calendar-card" role="region" [attr.aria-label]="'Kalender ' + monthYearLabel">
            <div class="title">
              {{ today | date:'EEE, MMM, d' }}
            </div>

            <div class="monthbar">
              <button class="month-nav-btn prev" (click)="previousMonth()" aria-label="Vorheriger Monat">
                <i class="chev-left"></i>
              </button>
              <span class="label">{{ monthYearLabel }}</span>
              <button class="month-nav-btn next" (click)="nextMonth()" aria-label="Nächster Monat">
                <i class="chev-right"></i>
              </button>
            </div>

            <div class="weekdays" aria-hidden="true">
              <div *ngFor="let day of weekDays">{{ day }}</div>
            </div>

            <div class="grid" role="grid" aria-readonly="false">
              <ng-container *ngFor="let calDay of calendarDays">
                <div *ngIf="calDay.isPad"
                     class="pad">
                </div>
                <div *ngIf="!calDay.isPad"
                     class="day"
                     [class.is-today]="calDay.isToday"
                     [class.is-selected]="calDay.isSelected"
                     [class.is-in-range]="calDay.isInRange"
                     [class.is-range-start]="calDay.isRangeStart"
                     [class.is-range-end]="calDay.isRangeEnd"
                     (click)="toggleDateSelection(calDay)"
                     role="gridcell"
                     [attr.aria-selected]="calDay.isSelected"
                     tabindex="0">
                  {{ calDay.day }}
                </div>
              </ng-container>
            </div>

            <div class="selected-info" *ngIf="hasRangeSelection">
              <p>{{ selectedDatesCount }} Tag(e) ausgewählt</p>
            </div>

            <div class="selected-info" *ngIf="rangeStart && !rangeEnd">
              <p class="hint">Wähle End-Datum aus</p>
            </div>
          </div>

          <button class="book-button" (click)="openBooking()">Book now</button>
        </div>
      </div>

      <div class="details-grid">
        <h2>Details</h2>

        <div class="detail-item">
          <strong>Typ:</strong>
          <span>{{ room.type }}</span>
        </div>

        <div class="detail-item">
          <strong>Name:</strong>
          <span>{{ room.name }}</span>
        </div>

        <div class="detail-item" *ngIf="room.type === 'Bedroom'">
          <strong>Anzahl Betten:</strong>
          <span>{{ numberOfBeds || 'Nicht angegeben' }}</span>
        </div>

        <div class="detail-item" *ngIf="room.type === 'Meetingroom'">
          <strong>Anzahl Stühle:</strong>
          <span>{{ numberOfChairs || 'Nicht angegeben' }}</span>
        </div>

      </div>


    </div>
  </div>
</div>

<footer>
  <div class="footer-columns">
    <div class="Adula">
      <h3>Adula</h3>
      <div class="description">
        <p>
          Wir sind das familiengeführte Hotel Adula in den Alpen: herzlich, unkompliziert <br />
          und nah an der Natur. Gemütliche Zimmer mit Bergblick, regionale Küche und <br />
          persönliche Tipps für jede Saison. Nachhaltig, kinderfreundlich – ideal für Ski,<br /> Wandern und erholsame
          Auszeiten.
        </p>
      </div>
    </div>
    <div class="reach-out">
      <h4>Reach out</h4>
      <table role="presentation" cellspacing="0" cellpadding="4">
        <tr>
          <td><img src="mail_logo.png" alt="E-Mail" width="24" height="24"></td>
          <td><p>hoteladula@gmail.com</p></td>
        </tr>
        <tr>
          <td><img src="instagram_logo.png" alt="Instagram" width="24" height="24"></td>
          <td><p>@hoteladula</p></td>
        </tr>
        <tr>
          <td><img src="linkedin_logo.png" alt="LinkedIn" width="24" height="24"></td>
          <td><p>@hoteladula</p></td>
        </tr>
      </table>
    </div>
  </div>
</footer>
